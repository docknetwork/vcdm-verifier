(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{18893:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V},isString:function(){return F}});var n=r(39227),i=r(85893),a=r(809),o=r.n(a),s=r(92447),c=r(26265),d=r(67294),l=r(86010),u=r(41120),p=r(22318),f=r(79123),h=r(37916),x=r(282),b=r(12112),j=r(43832),g=r(63144),v=r.n(g),m=r(29973),y=r(81395),w=r(72063),Z=r(87748),O=r(41749),k=r(95477),P=r(72655),S=r(10421),C=r(1939);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=new P.BT({dock:new P.ZZ(C.ZP)},new P.oz("https://uniresolver.io")),E="wss://mainnet-node.dock.io";function _(e){return B.apply(this,arguments)}function B(){return(B=(0,s.Z)(o().mark((function e(t){var r,n,i,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,C.ZP.api&&C.ZP.api.isConnected){e.next=5;break}return delete C.ZP.api,e.next=5,C.ZP.init({address:E});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Connecting to node failed",e.t0);case 10:if(n={resolver:W,compactProof:!0,forceRevocationCheck:!0,schemaApi:{dock:C.ZP},revocationApi:{dock:C.ZP}},!t.verifiableCredential){e.next=18;break}return i=t.proof,a=i.challenge,s=i.domain,e.next=15,(0,S.hb)(t,D(D({},n),{},{challenge:a,domain:s}));case 15:r=e.sent,e.next=21;break;case 18:return e.next=20,(0,S.Dv)(t,n);case 20:r=e.sent;case 21:if(r){e.next=23;break}throw new Error("No presentation or credential provided");case 23:if(!r.verified){e.next=25;break}return e.abrupt("return",r);case 25:throw r.error.errors||r.error;case 26:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function T(e){var t="No Subject",r=e.credentialSubject&&(e.credentialSubject.length?e.credentialSubject[0]:e.credentialSubject);if(r){var n=Object.keys(r);n.splice(n.indexOf("id"),1),n.length?"string"!==(t=r[n[0]])&&(t=t.name||JSON.stringify(t)):r.id&&(t=r.id)}return t}var z=function(e){var t=e.credential,r=e.handleClose,n=(0,d.useState)(),a=n[0],c=n[1],l=(0,d.useState)(),u=l[0],f=l[1];function h(){return(h=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(t);case 3:c(!0),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Verification failed: ",e.t0),e.t0&&f(e.t0.length?e.t0:[e.t0]),c(!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}(0,d.useEffect)((function(){t&&(c(null),f(null),function(e){h.apply(this,arguments)}(t))}),[t]);var b=t&&t.verifiableCredential;return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Z.Z,{p:3,bgcolor:"background.default",children:[(0,i.jsx)(p.Z,{variant:"h6",gutterBottom:!0,children:b?"Presentation":T(t)}),!b&&t.credentialSubject&&t.credentialSubject.id&&(0,i.jsxs)(p.Z,{noWrap:!0,variant:"subtitle1",children:["Issued to ",t.credentialSubject&&t.credentialSubject.id]})]}),(0,i.jsxs)(Z.Z,{p:3,children:[t.issuer&&(0,i.jsxs)(p.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Issuer: ",JSON.stringify(t.issuer)]}),t.type&&(0,i.jsxs)(p.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Type: ",JSON.stringify(t.type)]}),t.proof&&(0,i.jsxs)(p.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Proof type: ",t.proof.type,(0,i.jsx)("br",{}),"Proof date: ",t.proof.created]}),t.issuanceDate&&(0,i.jsxs)(p.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Issue date: ",t.issuanceDate]}),t.expirationDate&&(0,i.jsxs)(p.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Expiration date: ",t.expirationDate]}),(0,i.jsx)("br",{}),(0,i.jsxs)(O.Z,{container:!0,spacing:1,direction:"row",alignItems:"center",children:[(0,i.jsx)(O.Z,{item:!0,xs:2,children:!0===a?(0,i.jsx)(y.Z,{color:"primary",style:{width:"54px",height:"54px",transform:"translate(-5px, 0)"}}):!1===a?(0,i.jsx)(w.Z,{color:"error",style:{width:"54px",height:"54px",transform:"translate(-5px, 0)"}}):(0,i.jsx)("div",{style:{paddingBottom:"5px",paddingTop:"4px"},children:(0,i.jsx)(k.Z,{thickness:4,size:45})})}),(0,i.jsx)(O.Z,{item:!0,xs:10,children:!0===a?(0,i.jsx)(p.Z,{variant:"body1",children:"Verified"}):!1===a?(0,i.jsx)(p.Z,{variant:"body1",children:"Credential is not valid"}):(0,i.jsx)(p.Z,{variant:"body1",children:"Verifying the credential..."})})]}),(0,i.jsx)("br",{}),!1===a&&u.map((function(e,t){return(0,i.jsx)(Z.Z,{bgcolor:"error.light",color:"error.dark",p:2,children:(0,i.jsx)(p.Z,{component:"pre",variant:"body2",gutterBottom:!0,style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e.stack||e.name})},t)}))]}),a&&(0,i.jsx)(Z.Z,{p:3,style:{marginTop:"auto"},children:(0,i.jsx)(x.Z,{endIcon:(0,i.jsx)(m.Z,{}),variant:"contained",onClick:r,fullWidth:!0,children:"Verify another credential"})})]})})};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=(0,u.Z)((function(e){return{content:(0,c.Z)({justifyContent:"center",flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:0,paddingTop:"100px"},e.breakpoints.down("sm"),{paddingLeft:"0",paddingRight:"0"}),contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:400},dropzone:{transition:"all 0.2s ease-in-out",backgroundColor:e.palette.background.paper,minHeight:"250px",width:"100%"},textInput:{border:0,borderRadius:3,margin:"20px 0 0 0",color:"black"},dropzoneText:{padding:"2.5% 5%",fontSize:12},submitButton:{float:"right"},drawer:{maxWidth:400,width:"100%",flexShrink:0},drawerPaper:{width:"100%",maxWidth:400},bottomLink:{color:"#2887de"}}}));function F(e){return"string"===typeof e||e instanceof String}var V=function(){var e=R(),t=(0,d.useState)(!1),r=t[0],a=t[1],u=(0,d.useState)({json:null,text:""}),g=u[0],m=u[1],y=function(){var e=(0,s.Z)(o().mark((function e(t){var r,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.target.value)){e.next=19;break}if(!F(o=n)||!new RegExp("^\\w+:\\/?\\/?[^\\s]+$").test(o)){e.next=16;break}return e.prev=3,e.next=6,v()(n);case 6:return i=e.sent,e.next=9,i.json();case 9:r=e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:e.next=17;break;case 16:try{r=JSON.parse(n)}catch(s){}case 17:e.next=20;break;case 19:a(!1);case 20:m({json:r,text:n});case 22:case"end":return e.stop()}var o}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();function w(e){e.preventDefault(),a(!0)}var Z=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("u",{children:"Choose JSON file"})," (or drag & drop your file)",(0,i.jsx)("br",{}),(0,i.jsx)(f.Z,{name:"json",onChange:y,onClick:function(e){e.stopPropagation()},fullWidth:!0,required:!0,multiline:!0,rowsMax:10,rows:1,value:g.text,className:e.textInput,label:"Credential/Presentation URL or JSON",placeholder:"{ ... }",variant:"filled"})]});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:(0,l.Z)(e.content,(0,c.Z)({},e.contentShift,r)),children:[(0,i.jsxs)(j.Z,{maxWidth:"md",children:[(0,i.jsx)("center",{children:(0,i.jsx)(p.Z,{variant:"h1",gutterBottom:!0,children:"W3C Credential Verifier"})}),(0,i.jsx)("br",{}),(0,i.jsxs)("form",{onSubmit:w,children:[(0,i.jsx)(h.A0,{acceptedFiles:["application/json"],filesLimit:1,dropzoneText:Z,dropzoneParagraphClass:e.dropzoneText,onDrop:function(){var e=(0,s.Z)(o().mark((function e(t){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,n.Z)(t,1),i=r[0],(a=new FileReader).onload=function(e){var t=JSON.parse(e.target.result);m({json:t,text:JSON.stringify(t,null,2)}),w(e)},a.readAsText(i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),showPreviews:!1,showPreviewsInDropzone:!1,showAlerts:!0,rows:1,dropzoneClass:e.dropzone}),(0,i.jsx)("br",{}),(0,i.jsx)(x.Z,{className:e.submitButton,variant:"contained",color:"primary",type:"submit",disabled:!g.json,children:"Verify"})]})]}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(j.Z,{maxWidth:"md",children:(0,i.jsxs)("center",{children:[(0,i.jsx)("br",{}),(0,i.jsxs)(p.Z,{variant:"body2",children:["This verifier is open source and\xa0",(0,i.jsx)("a",{href:"https://github.com/docknetwork/vcdm-verifier",target:"_blank",rel:"noreferrer noopener",className:e.bottomLink,children:"hosted at GitHub"}),"."]}),(0,i.jsx)("br",{})]})})]}),(0,i.jsx)(b.ZP,{className:e.drawer,variant:"persistent",anchor:"right",open:r,classes:{paper:e.drawerPaper},children:(0,i.jsx)(z,J({},{handleClose:function(){a(!1),m({json:null,text:""})},credential:r&&g.json}))})]})}},78581:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(18893)}])},46601:function(){},89214:function(){},71922:function(){},2363:function(){},97670:function(){},52361:function(){},94616:function(){},55024:function(){}},function(e){e.O(0,[845,984,774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);