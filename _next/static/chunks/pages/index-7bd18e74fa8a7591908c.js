(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8893:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return z},isString:function(){return T}});var n=t(885),i=t(5861),a=t(4942),s=t(7757),o=t.n(s),c=t(7294),d=t(6010),l=t(9760),u=t(2318),p=t(9123),h=t(9706),x=t(282),f=t(2112),j=t(3832),g=t(9751),b=t.n(g),v=t(9973),m=t(1395),w=t(2063),y=t(9669),Z=t.n(y),k=t(7748),S=t(1749),N=t(5477),C=t(5893);function W(e){return O.apply(this,arguments)}function O(){return(O=(0,i.Z)(o().mark((function e(r){var t,n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z().post("api/verify/",r);case 2:if(t=e.sent){e.next=5;break}throw new Error("No presentation or credential provided");case 5:if(n=t.data,i=n.verified,a=n.results,!i){e.next=8;break}return e.abrupt("return",t);case 8:if(!a){e.next=10;break}throw a.error||a;case 10:throw"Invalid credential";case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){var r="No Subject",t=e.credentialSubject&&(e.credentialSubject.length?e.credentialSubject[0]:e.credentialSubject);if(t){var n=Object.keys(t);n.splice(n.indexOf("id"),1),n.length?"string"!==(r=t[n[0]])&&(r=r.name||JSON.stringify(r)):t.id&&(r=t.id)}return r}var _=function(e){var r=e.credential,t=e.handleClose,n=(0,c.useState)(),a=n[0],s=n[1],d=(0,c.useState)(),l=d[0],p=d[1];function h(){return(h=(0,i.Z)(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(r);case 3:s(!0),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Verification failed: ",e.t0),e.t0&&p(e.t0.length?e.t0:[e.t0]),s(!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}(0,c.useEffect)((function(){r&&(s(null),p(null),function(e){h.apply(this,arguments)}(r))}),[r]);var f=r&&r.verifiableCredential;return(0,C.jsx)(C.Fragment,{children:r&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(k.Z,{p:3,bgcolor:"background.default",children:[(0,C.jsx)(u.Z,{variant:"h6",gutterBottom:!0,children:f?"Presentation":P(r)}),!f&&r.credentialSubject&&r.credentialSubject.id&&(0,C.jsxs)(u.Z,{noWrap:!0,variant:"subtitle1",children:["Issued to ",r.credentialSubject&&r.credentialSubject.id]})]}),(0,C.jsxs)(k.Z,{p:3,children:[r.issuer&&(0,C.jsxs)(u.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Issuer: ",JSON.stringify(r.issuer)]}),r.type&&(0,C.jsxs)(u.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Type: ",JSON.stringify(r.type)]}),r.proof&&(0,C.jsxs)(u.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Proof type: ",r.proof.type,(0,C.jsx)("br",{}),"Proof date: ",r.proof.created]}),r.issuanceDate&&(0,C.jsxs)(u.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Issue date: ",r.issuanceDate]}),r.expirationDate&&(0,C.jsxs)(u.Z,{variant:"body2",noWrap:!0,gutterBottom:!0,children:["Expiration date: ",r.expirationDate]}),(0,C.jsx)("br",{}),(0,C.jsxs)(S.Z,{container:!0,spacing:1,direction:"row",alignItems:"center",children:[(0,C.jsx)(S.Z,{item:!0,xs:2,children:!0===a?(0,C.jsx)(m.Z,{color:"primary",style:{width:"54px",height:"54px",transform:"translate(-5px, 0)"}}):!1===a?(0,C.jsx)(w.Z,{color:"error",style:{width:"54px",height:"54px",transform:"translate(-5px, 0)"}}):(0,C.jsx)("div",{style:{paddingBottom:"5px",paddingTop:"4px"},children:(0,C.jsx)(N.Z,{thickness:4,size:45})})}),(0,C.jsx)(S.Z,{item:!0,xs:10,children:!0===a?(0,C.jsx)(u.Z,{variant:"body1",children:"Verified"}):!1===a?(0,C.jsx)(u.Z,{variant:"body1",children:"Credential is not valid"}):(0,C.jsx)(u.Z,{variant:"body1",children:"Verifying the credential..."})})]}),(0,C.jsx)("br",{}),!1===a&&l.map((function(e,r){return(0,C.jsx)(k.Z,{bgcolor:"error.light",color:"error.dark",p:2,children:(0,C.jsx)(u.Z,{component:"pre",variant:"body2",gutterBottom:!0,style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e.stack||e.name||e.error})},r)}))]}),a&&(0,C.jsx)(k.Z,{p:3,style:{marginTop:"auto"},children:(0,C.jsx)(x.Z,{endIcon:(0,C.jsx)(v.Z,{}),variant:"contained",onClick:t,fullWidth:!0,children:"Verify another credential"})})]})})},B=(0,l.Z)((function(e){return{content:(0,a.Z)({justifyContent:"center",flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:0,paddingTop:"100px"},e.breakpoints.down("sm"),{paddingLeft:"0",paddingRight:"0"}),contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:400},dropzone:{transition:"all 0.2s ease-in-out",backgroundColor:e.palette.background.paper,minHeight:"250px",width:"100%"},textInput:{border:0,borderRadius:3,margin:"20px 0 0 0",color:"black"},dropzoneText:{padding:"2.5% 5%",fontSize:12},submitButton:{float:"right"},drawer:{maxWidth:400,width:"100%",flexShrink:0},drawerPaper:{width:"100%",maxWidth:400},bottomLink:{color:"#2887de"}}}));function T(e){return"string"===typeof e||e instanceof String}var z=function(){var e=B(),r=(0,c.useState)(!1),t=r[0],s=r[1],l=(0,c.useState)({json:null,text:""}),g=l[0],v=l[1],m=function(){var e=(0,i.Z)(o().mark((function e(r){var t,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=r.target.value)){e.next=19;break}if(!T(a=n)||!new RegExp("^\\w+:\\/?\\/?[^\\s]+$").test(a)){e.next=16;break}return e.prev=3,e.next=6,b()(n);case 6:return i=e.sent,e.next=9,i.json();case 9:t=e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:e.next=17;break;case 16:try{t=JSON.parse(n)}catch(o){}case 17:e.next=20;break;case 19:s(!1);case 20:v({json:t,text:n});case 22:case"end":return e.stop()}var a}),e,null,[[3,12]])})));return function(r){return e.apply(this,arguments)}}();function w(e){e.preventDefault(),s(!0)}var y=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("u",{children:"Choose JSON file"})," (or drag & drop your file)",(0,C.jsx)("br",{}),(0,C.jsx)(p.Z,{name:"json",onChange:m,onClick:function(e){e.stopPropagation()},fullWidth:!0,required:!0,multiline:!0,rowsMax:10,rows:1,value:g.text,className:e.textInput,label:"Credential/Presentation URL or JSON",placeholder:"{ ... }",variant:"filled"})]});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:(0,d.Z)(e.content,(0,a.Z)({},e.contentShift,t)),children:[(0,C.jsxs)(j.Z,{maxWidth:"md",children:[(0,C.jsx)("center",{children:(0,C.jsx)(u.Z,{variant:"h1",gutterBottom:!0,children:"W3C Credential Verifier"})}),(0,C.jsx)("br",{}),(0,C.jsxs)("form",{onSubmit:w,children:[(0,C.jsx)(h.A0,{acceptedFiles:["application/json"],filesLimit:1,dropzoneText:y,dropzoneParagraphClass:e.dropzoneText,onDrop:function(){var e=(0,i.Z)(o().mark((function e(r){var t,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,n.Z)(r,1),i=t[0],(a=new FileReader).onload=function(e){var r=JSON.parse(e.target.result);v({json:r,text:JSON.stringify(r,null,2)}),w(e)},a.readAsText(i);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),showPreviews:!1,showPreviewsInDropzone:!1,showAlerts:!0,rows:1,dropzoneClass:e.dropzone}),(0,C.jsx)("br",{}),(0,C.jsx)(x.Z,{className:e.submitButton,variant:"contained",color:"primary",type:"submit",disabled:!g.json,children:"Verify"})]})]}),(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),(0,C.jsx)(j.Z,{maxWidth:"md",children:(0,C.jsxs)("center",{children:[(0,C.jsx)("br",{}),(0,C.jsxs)(u.Z,{variant:"body2",children:["This verifier is open source and\xa0",(0,C.jsx)("a",{href:"https://github.com/docknetwork/vcdm-verifier",target:"_blank",rel:"noreferrer noopener",className:e.bottomLink,children:"hosted at GitHub"}),"."]}),(0,C.jsx)("br",{})]})})]}),(0,C.jsx)(f.ZP,{className:e.drawer,variant:"persistent",anchor:"right",open:t,classes:{paper:e.drawerPaper},children:(0,C.jsx)(_,{handleClose:function(){s(!1),v({json:null,text:""})},credential:t&&g.json})})]})}},8581:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8893)}])}},function(e){e.O(0,[337,774,888,179],(function(){return r=8581,e(e.s=r);var r}));var r=e.O();_N_E=r}]);